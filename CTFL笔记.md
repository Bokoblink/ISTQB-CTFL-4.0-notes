# CTFL

## 1.测试基础

### 1.1什么是测试

- 一系列发现缺陷和评估软件产品质量的活动
- 不完全专注于验证测试对象，还涉及确认

#### 1.1.1 测试目的

- 评估工作产品，例如需求、用户故事、设计和代码
- 触发失效并发现缺陷
- 确保所需的被测对象的覆盖率
- 降低软件质量不足的风险级别
- 验证是否已满足指定需求
- 验证测试对象是否符合合同、法律和监管要求
- 向利益相关方提供信息，使他们能够做出明智的决策
- 建立对被测对象质量的信心
- 确认被测对象是否完整并按利益相关方的预期工作

#### 1.1.2 测试与调试

- 当动态测试触发失效时，调试涉及查找失效原因
  - 重现失效
  - 诊断（找到根本原因）
  - 修复失效的原因
- 确认测试

### 1.2 为什么需要测试？

有助于在设定的范围、时间、质量和预算限制内实现商定的目标

#### 1.2.1 测试对成功的贡献

- 提供了经济高效的发现缺陷的方法
  - 试间接地提高测试对象的质量
- 提供了在软件开发生存周期（SDLC）的各个阶段直接评估测试对象质量的方法
  - 有助于做出进入软件开发生存周期（SDLC）下一阶段的决策
- 为用户提供了开发项目的间接代表
  - 测试人员确保他们对用户需求的理解贯穿于整个开发生存周期
- 为了满足合同或法律要求，或遵守监管标准

#### 1.2.2 测试和质量保证（QA）

- 质量控制（QC）
  - 以产品为导向的纠正方法
  - 侧重于支持实现适当质量级别
  - 测试是质量控制的主要形式
  - 测试结果用于修复缺陷
- 质量保证（QA）
  - 是以过程为导向的预防性方法
  - 侧重于过程的实施和改进
  - 适用于开发和测试过程，是项目中每个人的责任
  - 测试结果提供关于开发和测试过程执行情况的反馈

#### 1.2.3 错误、缺陷、失效和根本原因

- 人会犯错误（error、mistake），从而产生缺陷（defect、fault，bug），进而导致失效（failure）
- 错误和缺陷并不是导致失效的唯一原因
- 根本原因是问题发生的根本原因

### 1.3 测试原则

- 测试说明缺陷存在，不能证明缺陷不存在
- 穷尽测试是不可能的
- 早期测试可以节省时间和费用
- 缺陷的集群效应
  - 通常大多数已发现的缺陷出现在少数系统组件中
  - 或少数系统组件是引起大多数操作失效的原因
- 测试会无效
  - 如果重复多次相同的测试，在检测新缺陷方面会变得越来越无效
- 测试活动依赖于测试环境
- 不存在缺陷的谬论
  - 期望软件验证会确保系统的成功是一种谬论

### 1.4 测试活动、测试件和测试角色

#### 1.4.1 测试活动和任务

- 测试规划
  - 定义测试目的
  - 在整体环境的约束下选择可达到目的的最佳方法
  - 输出工作产品：
    - 包括：测试计划、测试进度表、风险记录表以及入口和出口准则
    - 风险记录表：
      - 包含风险、风险可能性、风险影响以及风险缓解信息的列表
    - 测试进度表、风险记录表、入口和出口准则：
      - 通常是测试计划的一部分

- 测试监测和控制
  - 持续检查所有测试活动，将实际进度与计划进行比较
  - 采取必要的行动来实现测试目的
  - 输出工作产品：
    - 包括：测试过程报告、文档化的控制指令和风险信息
- 测试分析
  - 分析测试依据以识别可测试的特征，定义相关测试条件的优先级，以及有关的风险和风险级别
  - 对测试依据和测试对象进行评估，以识别它们可能包含的缺陷并评估其可测试性
  - 通常由掌握测试技术的人员提供支持
  - 根据可度量的覆盖准则回答“测试什么？”的问题
  - 输出工作产品：
    - 包括：（按优先级排序）测试条件（例如，验收准则），在测试依据中发现的有关缺陷的缺陷报告（如果该缺陷还没有被直接修复）。
- 测试设计
  - 如何将测试条件转化成测试用例和其他测试件
  - 通常与识别覆盖项有关，可以作为具体选择哪些测试用例输入的指南
  - 定义测试数据需求、设计测试环境以及确认所需的基础设施和工具
  - 测试设计回答“如何测试？”的问题
  - 输出工作产品：
    - 包括：（按优先级排序）测试用例、测试章程、覆盖项、测试数据需求和测试环境需求
- 测试实施
  - 创建或获取测试执行所需的测试件（例如，测试数据）
  - 测试用例可以被组织到测试规程中，并且经常被组装成测试套件使用
  - 创建人工和自动化的测试脚本
  - 为实现高效的测试执行，测试规程要按照优先级在测试执行进度表中排序
  - 构建测试环境，并验证其设置的正确性
  - 输出工作产品：
    - 包括：测试规程、自动化测试脚本、测试套件、测试数据、测试执行计划和测试环境要素。
    - 测试环境要素的实例包括：
      - 桩、驱动器、模拟器和服务虚拟化。
- 测试执行
  - 根据测试执行进度表执行测试（测试运行）
  - 既可以人工进行也可以自动进行
  - 测试执行可以采取多种形式，包括持续测试或结对测试会话
  - 将测试的实际结果与预期结果进行比较
  - 记录测试结果
  - 分析导致异常发生的可能原因。该分析以观察到的失效为依据报告异常
  - 输出工作产品：
    - 包括：测试执行工作产品包括：测试日志和缺陷报告
- 测试完成
  - 通常发生在项目里程碑处（例如，发布、迭代结束、测试级别完成）
  - 针对任何未解决的缺陷、变更请求或产品待办事项列表
  - 未来可能有用的测试件都会被识别并归档，或移交给适当的团队
  - 测试环境被恢复到约定状态
  - 对测试活动进行分析，以确定未来迭代、发布或项目的经验教训和改进
  - 创建测试完成报告并与利益相关方沟通
  - 输出工作产品：
    - 测试完成工作产品包括：测试完成报告、后续项目或迭代的改进行动项、文档化的经验教训和变更请求（例如，产品待办事项）

#### 1.4.2 周境中的测试过程

- 测试的执行方式将取决于多种环境因素
  - 利益相关方（需要、期望、需求、合作意愿等）。
  - 团队成员（技能、知识、经验水平、工作效率、培训要求等）。
  - 业务领域（测试对象的重要性、已识别的风险、市场要求、特定的法律法规等）。
  - 技术因素（软件类型、产品架构、使用的技术等）。
  - 项目约束（范围、时间、预算、资源等）。
  - 组织因素（组织架构、现有政策、已在应用的实践等）。
  - 软件开发生存周期（工程实践、开发方法等）。
  - 工具（可用性、易用性、依从性等）。

#### 1.4.4 测试依据和测试件之间的可追溯性

- 为了实施有效的测试监测和控制，测试过程中建立和维护测试依据元素、与元素相关的测试件（例如测试条件、风险、测试用例）、测试结果和发现的缺陷之间的可追溯性非常重要
- 准确的可追溯性可支持覆盖评估，测试依据中定义可衡量的覆盖准则非常有用。覆盖准则可以作为关键绩效指标，推动活动的进行，以展示测试目的达成的程度
- 良好的可追溯性还可以确定变更的影响、促进测试审计，并有助于满足 IT治理准则
- 可追溯性提供了针对业务目标评估产品质量、过程能力和项目进展的信息

#### 1.4.5 测试活动中的角色

- 测试管理角色
  - 全面负责测试过程、测试团队以及测试活动的领导工作
  - 主要关注测试规划、测试监测和控制以及测试完成活动
  - 测试管理角色开展工作的方式因周境而异
- 测试角色
  - 色对测试的工程（技术）方面负有整体责任
  - 主要关注测试分析、测试设计、测试实施和测试执行等活动

- 不同的人员可能在不同的时间点扮演这些角色。也可以一个人同时承担测试和测试管理的角色

### 1.5 测试中的基本技能和良好实践

#### 1.5.1 测试所需的通用技能

- 测试知识（例如，通过使用测试技术提高测试的有效性）。
- 全面、细致、好奇心、注重细节、有条不紊（对识别缺陷，尤其对于发现难以发现的缺陷）。
- 良好的沟通技巧、积极的倾听、具有团队合作精神（与所有利益相关方有效互动，以可理解的方式向他人传递信息，并报告和讨论缺陷）。
- 分析性思维、批判性思维、创造力（用以提高测试的有效性）。
- 技术知识（提高测试效率，例如使用适当的测试工具）。
- 领域知识（能够理解并与最终用户/业务代表沟通）。

#### 1.5.2 完整团队方法

- 在团队环境中有效地工作并积极为团队目标做出贡献
- 在完整团队方法中，所有团队成员都具有进行各种类型任务的知识和能力，并且每个人都要对质量负责
- 团队成员共享相同的工作空间（物理或虚拟），共址工作有助于沟通和互动
- 优势：
  - 可提升团队活力
  - 增强团队内部的沟通和协作
  - 通过充分利用团队内不同的技能，产生协同效应，从而使项目获益
- 由于对周境的依赖，完整团队方法可能并不总是适用

#### 1.5.3 测试独立性

- 因为作者和测试人员之间存在认知偏差，因此一定程度的独立性可以使测试人员更有效地发现缺陷。
- 工作产品可以交由：
  - 作者进行测试（无独立性）
  - 来自作者同一团队的同行进行测试（一定的独立性）
  - 组织内非作者团队的测试人员进行测试（高独立性）
  - 组织外部的测试人员进行测试（非常高的独立性）
- 对于大多数项目而言，通常最好使用多个独立性级别的测试。

- 独立的测试人员主要优势在于
  - 与开发人员相比，由于背景、技术视角、以及认知偏向的差异，更可能识别出不同类型的失效和缺陷
  - 可以验证、质疑或推翻利益相关方在系统规格说明和系统实施期间所做的假设
- 缺点
  - 独立的测试人员可能与开发团队脱离
  - 可能导致缺乏协作、沟通出现问题或与开发团队形成对立关系
  - 开发人员可能会丧失对质量的责任感
  - 独立测试人员可能被视为瓶颈，或被指责为发布延迟负有责任

## **2. 软件开发生存周期中的测试**

### 2.1 软件开发生存周期中的测试

- 软件开发生存周期（SDLC）模型是对软件开发过程的抽象、概要表述
- SDLC 模型定义了软件开发过程中不同开发阶段和活动类型之间的逻辑和时间关系
- SDLC 模型的示例：
  - 顺序开发模型（例如瀑布模型、V 模型）
  - 迭代开发模型（例如螺旋模型、原型模型）
  - 增量开发模型（例如统一软件开发过程）

#### 2.1.1 软件开发生存周期对测试的影响

- 测试活动的范围和时间安排（例如测试级别和测试类型）
- 测试文档的详细程度
- 测试技术和测试方法的选择
- 测试自动化程度
- 测试人员的角色和职责

#### 2.1.2 软件开发生存周期与良好的测试实践

- 每个软件开发活动，都有相应的测试活动，以便对所有开发活动进行质量控制
- 不同测试级别具有特定且不同的测试目标，可以确保测试既全面又避免冗余
- 给定测试级别的测试分析和设计始于相应的软件开发生存周期开发阶段，以便测试能够遵循早期测试的原则
- 相关文档的初稿完成时，测试人员立即参与评审工作产品，以便早期测试和缺陷检测，从而支持测试左移方法

#### 2.1.3 测试是软件开发的驱动力

- 测试驱动开发（TDD）、验收测试驱动开发（ATDD）和行为驱动开发（BDD）是类似的开发方法，将测试定义为指导开发的手段
- 这些方法都实现了早期测试的原则并遵循左移方法
- 为测试在编写代码之前定义
- 它们支持迭代开发模型
- 测试驱动开发（TDD）
  - 通过测试用例来指导编码（而不是详尽的软件设计）
  - 先编写测试，后编写代码以满足测试，最后对测试和代码进行重构。
- 验收测试驱动开发（ATDD）
  - 作为系统设计过程的一部分，从验收准则中导出测试
  - 在部分应用程序开发前，编写测试，以满足测试的要求。
- 行为驱动开发（BDD）：
  - 用简化的自然语言编写测试用例来表达应用程序的期望行为，利益相关方容易理解，通常使用Given/When/Then 格式。
  - 自动将测试用例转化为可执行的测试

#### 2.1.4 DevOps 与测试

- DevOps 是一种组织方法
- 旨在通过使开发（包括测试）和运维部门共同努力，实现一系列通用目标，从而实现协同效应
- 要求组织内部进行文化转变，将开发和运维的职能同等看待，以弥合开发（包括测试）和运维之间的差距
- 提倡团队的自主权、快速反馈、集成工具链以及持续集成（CI）和持续交付（CD）等技术实践
- 通过 DevOps 交付流水线，软件团队可以更快地构建、测试和发布高质量的代码
- 优势：
  - 代码质量的快速反馈，并判断变更是否对现有代码产生不利影响
  - 持续集成（CI）通过鼓励开发人员提交高质量的代码，并辅以组件测试和静态分析，在测试中实现左移方法
  - 促进 CI/CD 自动化过程，有助于建立稳定的测试环境
  - 更加关注非功能性质量特性（例如性能、可靠性）
  - 交付流水线的自动化，减少人工重复测试的需求
  - 由于自动化回归测试的规模和范围，降低了回归风险

- 风险和挑战：
  - 必须定义和建立 DevOps 交付流水线
  - 必须引入和维护 CI/CD 工具
  - 测试自动化需要额外资源，这些资源可能难以建立和维护

#### 2.1.5 左移的方法

- 测试早期介入的原则有时被称为“左移”
- 是软件开发生存周期中较早进行测试的方法
- 左移建议测试应该早期进行，但不能因此忽视软件开发生存周期的后期测试
- 明如何实现测试 “左移”：
  - 从测试的角度评审规格说明。对规格说明进行评审通常可以发现潜在的缺陷，例如规格说明表述模糊、不完整和不一致。
  - 编码之前编写测试用例，在代码实现过程中通过测试用具（test harness）运行代码。
  - 使用持续集成（CI）和持续交付（CD），提供快速反馈和自动化组件测试，可以在代码提交到代码库时运行源代码测试。
  - 在动态测试之前或作为自动化过程的一部分对源代码进行静态分析。
  - 在可能的情况下，从组件测试级别开始进行非功能性测试。这是左移形式之一，因为非功能性测试类型通常在系统完整且代表性的测试环境就绪后，在软件开发生存周期的后期执行。
- 法可能会在过程早期增加培训、工作量和成本，但可以节省过程后期的工作量和成本

#### 2.1.6 回顾与过程改进

- 回顾会议作为发布的里程碑，通常在项目或迭代结束后，按需召开
- 讨论以下内容：
  - 哪些工作是成功的，应予以保留？
  - 哪些工作没成功，可以改进？
  - 如何整合改进并保持未来成功？
- 测试的典型收益包括：
  - 增加测试的有效性/效率（例如，实施过程改进的建议）
  - 提高测试件的质量（例如，联合评审测试过程）
  - 团队凝聚力和学习能力（例如，提出问题，列出改进点）
  - 提高测试依据的质量（例如，处理和解决需求范围和质量方面的缺陷）
  - 改善开发和测试之间的合作（例如，定期评审和优化协作）

### 2.2 测试级别和测试类型

- 测试级别是共同组织和管理的测试活动组
- 每个测试级别都是测试过程的一个实例，在给定的开发阶段，从单个组件到完整系统，或在适用情况下，乃至到系统的系统，执行软件相关的测试过程。
- 测试级别与软件开发生存周期内的其他活动相关
- 测试类型，是与某种质量特性相关的测试活动的集合，这些测试活动中的大部分可以在每个测试级别进行

#### 2.2.1 测试级别



## 4. 测试分析和设计

### 4.1 测试技术概述

- 支持测试人员开展测试分析（测试什么）和测试设计（如何测试）
- 术有助于以系统的方式开发相对较小但充分的测试用例集
- 在测试分析和设计期间帮助测试人员定义测试条件、识别覆盖项，并识别测试数据
- 黑盒测试技术
  - 也称为基于规格说明的技术
  - 基于对测试对象的特定行为进行分析，而不考虑其内部结构
  - 测试用例不依赖于软件的实现方式
- 白盒测试技术
  - 也称为基于结构的技术
  - 基于对测试对象的内部结构和处理进行分析
  - 由于测试用例依赖于软件的设计方式，因此白盒测试只能在测试对象的设计或实现之后创建
- 基于经验的测试技术
  - 有效地利用测试人员的知识和经验进行测试用例的设计和实施
  - 有效性在很大程度上取决于测试人员的技能
  - 能检测出使用黑盒和白盒测试技术可能会遗漏的缺陷
  - 是对黑盒和白盒测试技术的补充

### 4.2 黑盒测试技术

#### 4.2.1 等价类划分

- 基于给定分区中的所有元素都会被测试对象以相同方式处理的预期将数据划分为多个分区（称为等价类）
- 原理：如果测试用例测试了等价类中的一个值，并检测到缺陷，那么任何来自同一等价类的其他值的测试用例也应该能够检测到这个缺陷。因此，每个分区执行一个测试就足够了
- 分可应用于与测试对象相关的任何数据元素，包括输入、输出、配置项、内部值、与时间相关的值和接口参数
- 可以是连续的或离散的、有序的或无序的、有限的或无限的
- 不能重叠，并且必须是非空集合
- 有效等价类、无效等价类
  - 包含有效值的分区称为有效等价类
  - 包含无效值的分区称为无效等价类
- 在等价类划分中，覆盖项是等价类划分
  - 覆盖率是由被测试用例执行的等价类数量，除以已确定的等价类总数来度量的，并以百分比表示
- 单选项覆盖、多组等价类
  - 许多测试对象包括多组等价类分区，这意味着一个测试用例将覆盖来自不同等价类组的等价类
  - 在多组等价类情况下，最简单的覆盖准则被称为单选项覆盖
  - 单选项覆盖要求测试用例执行来自每个等价类组的每个等价类至少一次

#### 4.2.2 边界值分析

- 边界值分析（BVA）是基于执行等价类边界的技术
- 边界值分析只能用于有序分区
- 分区的最小值和最大值是它的边界值
- 如果两个元素属于同一个分区，那么它们之间的所有元素也必须属于该分区。
- 侧重于分区的边界值，因为开发人员更容易在这些边界值上出错
- 二值边界值和三值边界值分析
  - 二值边界值分析
    - 每个边界值都有两个覆盖项：该边界值以及属于相邻分区的最近邻值
    - 测试用例必须执行所有的覆盖项，即所有已识别的边界值
    - 覆盖率是由已被执行的边界值的数量，除以已识别的边界值总数度量，并以百分比表示
  - 三值边界值分析
    - 每个边界值都有三个覆盖项
    - 该边界值以及两侧的相邻值
    - 某些覆盖项可能不是边界值
    - 测试用例必须执行所有的覆盖项，即已识别的边界值及其相邻值
    - 覆盖率是由已被执行的边界值及其相邻值的数量，除以已识别的边界值及其相邻值的总数度量，并以百分比表示

#### 4.2.3 判定表测试

- 是什么
  - 判定表用于测试系统需求的实现，这些需求指定了不同的条件组合产生不同的结果
  - 是记录复杂逻辑（如业务规则）的有效方法
- 创建判定表
  - 定义了系统的条件和导致的动作，这些组成了判定表的行
  - 判定表的每一列对应了一个判定规则，该规则定义了各种条件的唯一组合以及相关的动作
  - 在有限判定表中，所有条件和动作的值表示为布尔值（“真”或“假”）
  - 在扩展判定表中，某些或者所有条件和动作也可以采用多个值
- 条件的符号
  - “T”（true）表示满足条件
  - “F”（false）表示不满足条件
  - “-”表示条件的取值与动作结果不相关
  - “N/A”表示该条件对于给定的规则是不可行的
  - 动作中
    - “X”表示动作应该发生
    - 空白表示动作不应该发生
  - 也可以使用其他符号
- 完全的判定表有足够多的列来覆盖条件的每种组合
- 判定表测试
  - 覆盖项是包含可行条件组合的列
  - 为了让这种技术达到 100%的覆盖率，测试用例必须执行所有这些列
  - 覆盖率是由已被执行的列数量，除以可执行列的总数度量，并以百分比表示
- 优点
  - 提供了系统化的方法来识别所有的条件组合，否则其中的某些组合可能会被忽视
  - 有助于发现需求中的任何漏洞或不一致
- 如果有很多条件，那么执行所有判定规则可能比较耗时，因为规则的数量会随着条件的数量呈指数增长
  - 为了减少需要执行的规则的数量，可以使用最小化判定表或基于风险的方法

#### 4.2.4 状态转移测试

- 是什么
  - 状态转移图通过显示系统可能的状态和有效的状态转移来模拟系统的行为
  - 转移由事件触发，该事件可能由守护条件进一步限定
  - 假设转移是瞬时的，有时可能导致软件采取动作
  - 常见的转移标签语法：“事件 [守护条件] / 动作”
- 状态表
  - 是等价于状态转移图的一种模型
  - 行表示状态，列表示事件（可能还包括守护条件）
  - 状态表条目（单元格）表示转移，并包含目标状态以及结果动作（如果已定义）
  - 与状态转移图相反，状态表通过空白单元格明确显示无效的转移
- 测试用例
  - 基于状态转移图或状态表的测试用例通常表示为事件序列，这些事件会导致一系列的状态变化（和动作，如果需要）
  - 一个测试用例可以并且通常会覆盖状态之间的若干次转移
- 覆盖准则
  - 全状态覆盖
    - 覆盖项是状态
    - 为了达到 100%的全状态覆盖率，测试用例必须确保所有状态都被访问到
    - 覆盖率是由已被访问的状态数量，除以状态总数度量，并以百分比表示
  - 有效转移覆盖
    - 覆盖项是单个有效转移
    - 为了达到 100%的覆盖率，测试用例必须执行所有的有效转移
    - 覆盖率是由已被执行的有效转移的数量，除以有效转移的总数度量，并以百分比表示
  - 全转移覆盖中
    - 覆盖项是状态表中显示的所有转移
    - 为了达到 100%的全转移覆盖率，测试用例必须执行所有的有效转移，并尝试执行无效转移
    - 在单个测试用例中仅测试一个无效转移有助于避免错误屏蔽，即一个缺陷阻止另一个缺陷被发现的情况。
    - 覆盖率是由已执行的测试用例所覆盖的执行有效转移和尝试无效转移的数量，除以有效和无效转移的总数度量，并以百分比表示
  - 全状态覆盖弱于有效转移覆盖，因为它通常可以在不执行所有转移的情况下达到
  - 有效转移覆盖是最广泛使用的覆盖准则
  - 达到完整的有效转移覆盖可保证完整的全状态覆盖
  - 达到完整的全转移覆盖可同时保证完整的全状态覆盖和完整的有效转移覆盖，并且应该是关键任务和安全关键软件的最低要求

### 4.3 白盒测试技术

#### 4.3.1 语句测试和语句覆盖

- 覆盖项是可执行语句
- 目的是设计测试用例，通过执行代码中的语句，直到达到可接受的覆盖率级别
- 覆盖率是用测试用例执行的语句数除以代码中可执行语句的总数度量，并以百分比表示
  - 达到 100%语句覆盖率时，能确保代码中的所有可执行语句至少已被执行过一次
  - 带有缺陷的每条语句将被执行到，这可能导致失效，从而证明缺陷的存在
  - 使用测试用例执行语句不能在所有的情况下都检测到缺陷
  - 100%的语句覆盖率不能确保所有的判定逻辑都被测试过

#### 4.3.2 分支测试和分支覆盖

- 覆盖项是分支
- 目的是设计测试用例，以执行代码中的分支，直到达成可接受的覆盖率级别为止
- 覆盖率是用测试用例执行的分支数除以分支总数度量，并以百分比表示
- 当达到 100%的分支覆盖时，代码中的所有分支，都被测试用例执行
  - 使用测试用例来执行分支并不能在所有情况下都检测到缺陷
- 分支覆盖包含语句覆盖
- 如果实现了 100%的分支覆盖率，也就实现了 100%的语句覆盖率（但反之不成立）

#### 4.3.3 白盒测试的价值

- 优点：在测试期间考虑到整个软件实现，有助于在软件规格说明模糊、过时或不完整时检测缺陷
- 弱点：如果软件没有实现一个或多个需求，白盒测试可能无法检测到由此产生的遗漏缺陷
- 用于
  - 白盒技术可用于静态测试
  - 适合于对尚未准备好执行的代码进行评审，以及伪代码和其他可以用控制流图建模的高层逻辑或自顶向下的逻辑
- 作用
  - 仅执行黑盒测试不能提供实际代码覆盖率的度量
  - 白盒覆盖率的度量数据提供了客观的覆盖率度量，并提供了必要的信息，以允许生成额外的测试来提高覆盖率，从而增加对代码的信心

### 4.4 基于经验的测试技术

#### 4.4.1 错误猜测

- 基于测试人员的知识来预测错误、缺陷和失效发生的技术
  - 以前软件的运行方式
  - 开发人员常犯的错误类型以及由这些错误导致的缺陷类型
  - 其他类似应用软件产生的失效类型
- 故障攻击
  - 实现错误猜测的一种系统方法
  - 要求测试人员创建或获取一份可能的错误、缺陷和失效列表，并设计测试来识别与缺陷相关的错误、暴露缺陷、或导致失效
  - 这些列表可以基于经验、缺陷和失效数据，或者基于软件失败原因的常识来构建

#### 4.4.2 探索性测试

- 在了解有关测试对象的同时，设计、执行和评估测试
- 用于更深入地了解测试对象，使用重点测试进行深入探索，并为未测试的区域创建测试
- 有时使用基于会话的测试来构建
  - 在基于会话的方法中，探索性测试在定义的时间盒内进行
  - 测试人员使用包含测试目的的测试章程来指导测试
  - 测试会话之后通常会汇报，包括测试人员和对测试会话的测试成果感兴趣的利益相关方之间的讨论
  - 在这种方法中，测试目的可被视为高级别的测试条件
  - 在测试会话期间，识别并执行覆盖项
  - 测试人员可以使用测试会话表格来记录所执行的步骤和发现的内容
- 用处
  - 在规格说明文档较少或不充分时，或测试的时间压力大的情况下很有帮助
  - 有助于作为对其他更正式测试技术的补充
- 如果测试人员经验丰富，具备领域知识，并具备较高的基本技能，探索性测试将更加有效

#### 4.4.3 基于检查表的测试

- 测试人员设计、实施和执行测试以覆盖检查表中的测试条件
- 可以基于经验、对用户重要的知识，或者对软件失效原因和方式的理解来构建
- 表不应包含可以自动检查的项、更适合作为入口/出口准则的项或过于笼统的项
- 检查表的项
  - 通常以问题的形式表述
  - 每个项应该可以单独和直接地进行检查
  - 这些项可以涉及需求、图形界面属性、质量特性或其他形式的测试条件
  - 可以创建检查表支持各种测试类型，包括功能和非功能性测试
- 应根据缺陷分析定期更新检查表
- 在缺乏详细的测试用例的情况下，基于检查表的测试可以为测试提供指南和某种程度的一致性

### 4.5 基于协作的测试方法

#### 4.5.1 协作用户故事编写

- 用户故事代表对系统或软件的用户或购买者有价值的特征
- 三个关键方面
  - 卡片
    - 描述用户故事的媒介（例如索引卡、电子板中的条目）
  - 对话
    - 解释软件的使用方式（可以是文档化或口头形式）
  - 确认
    - 验收准则
- 协作编写用户故事可以使用头脑风暴和思维导图等技术
- 通过协作，同时兼顾到业务、开发和测试三个视角，团队可以共同理解应该交付的内容和共享愿景
- 好的用户故事
  - 独立的
  - 可协商的
  - 有价值的
  - 可评估的
  - 小巧的
  - 可测试的
- 如果利益相关方不知道如何对用户故事进行测试，可能说明用户故事不够清晰，或者没有反映出有价值的内容，或者利益相关方需要在测试方面得到帮助

#### 4.5.2 验收准则

- 用户故事的验收准则是实现用户故事必须满足的条件，以便被利益相关方接受
- 验收准则可以被视为测试应该覆盖的测试条件
- 验收准则通常是对话的结果
- 用于
  - 定义用户故事的范围
  - 利益相关方之间达成共识
  - 描述正向和反向场景。
  - 作为用户故事验收测试的依据
  - 实现准确规划和估算
- 编写用户故事的验收准则有几种方式。最常见的两种格式是：
  - 面向场景
  - 面向规则

#### 4.5.3 验收测试驱动开发(ATDD)

- 是什么
  - ATDD 是测试先行（test-first）的一种方法
  - 测试用例在实现用户故事之前创建
  - 测试用例由具有不同视角的团队成员创建，例如客户、开发人员和测试人员
  - 测试用例可以人工或自动化执行
- 步骤
  1. 进行规格说明讨论会
     - 团队成员分析、讨论和编写用户故事及其验收准则
     - 在此过程中解决了用户故事中的不完整、模糊或缺陷
  2. 创建测试用例
     - 可以由整个团队或测试人员单独完成
     - 测试用例基于验收准则，并且视为软件运行方式的实例
     - 有助于团队正确实现用户故事
- 测试过程
  - 通常，第一批测试用例是正向测试，确认在没有异常或错误条件下的正确行为，并包括按照预期执行的活动序列
  - 在完成正向测试用例后，团队应进行反向测试
  - 最后，团队还应涵盖非功能质量特性（例如性能效率、易用性）
  - 测试用例应以利益相关方可以理解的方式进行描述
  - 通常，测试用例包含自然语言形式的句子，包括必要的前提条件（如果有），输入和后置条件
- 测试用例必须覆盖用户故事的所有特性，并且不应超出故事范围
- 不过，验收准则可能详细描述用户故事中描述的一些问题
- 此外，任何两个测试用例都不应该描述用户故事的相同特性
- 当以测试自动化框架支持的格式进行捕获时，开发人员可以在实现用户故事描述的特征时编写支持代码，从而自动化测试用例。验收测试就成为可执行的需求

## **5. 管理测试活动**

### 5.1 测试规划

#### 5.1.1 测试计划的目的和内容

- 测试计划描述了测试项目的目的、资源和过程

- 目的包括

  - 记录实现测试目的的方法和进度表。

  - 有助于确保执行的测试活动符合既定标准。

  - 作为与团队成员和其他利益相关方沟通的一种方式。

  - 表明测试遵守现有的测试方针和测试策略（或解释为什么测试会偏离这些策略）。

- 测试规划引导测试人员思考，并促进测试人员面对与风险、进度、人员、工具、成本、工作量等相关的未来挑战
- 准备测试计划是思考实现测试项目目的所需工作量的过程
- 测试计划的典型内容包括
  - 测试的周境（例如，范围、测试目的、约束条件、测试依据）。
  - 测试项目的假设和限制。
  - 利益相关方（例如，角色、职责、与测试、招聘和培训要求的相关性）
  - 沟通（例如，沟通的形式和频率、文档模板）。
  - 风险记录（例如，产品风险、项目风险）。
  - 测试方法（例如，测试级别、测试类型、测试技术、测试可交付成果、入口准则和出口准则、 测试的独立性、要收集的度量、测试数据需求、测试环境需求、与组织测试方针和测试策略的偏差）。
  - 预算和进度表

#### 5.1.2 测试人员对迭代和发布规划的贡献

- 发布规划
  - 着眼于产品的发布
  - 定义和重新定义产品待办事项
  - 可能涉及将较大的用户故事细化为一组较小的用户故事
  - 作为跨所有迭代中测试方法和测试计划的基础
  - 参与发布规划的测试人员
    - 参与编写可测试的用户故事和验收准则
    - 参与项目和质量风险分析
    - 估算与用户故事相关的测试工作量
    - 确定测试方法
    - 并为发布计划进行测试
- 迭代规划
  - 着眼于完成单个迭代
  - 关注迭代待办事项
  - 参与迭代规划的测试人员
    - 参与用户故事的详细风险分析
    - 确定用户故事的可测试性
    - 将用户故事分解为任务（尤其是测试任务）
    - 估算所有测试任务的测试工作量
    - 识别和细化测试对象的功能和非功能方面

#### 5.1.3 入口准则和出口准则

- 入口准则
  - 定义了开展特定活动的先决条件
  - 如果不符合入口准则，这项活动很可能会变得更困难、耗时、成本高昂、风险更大
  - 典型的入口准则包括：
    - 资源的可用性（例如，人员、工具、环境、测试数据、预算、时间）
    - 测试件的可用性（例如，测试依据、可测试的需求、用户故事、测试用例）
    - 测试对象的初始质量水平（例如，所有冒烟测试都已通过）
  - 在敏捷软件开发中，入口准则包括了必须满足用户故事才能开始开发和/或测试活动，入口准则也称为就绪的定义
- 出口准则
  - 定义了完成测试活动必须达到的目标
  - 典型的出口准则包括：
    - 充分性度量（例如，已实现的覆盖级别、未解决的缺陷数量、缺陷密度、失败的测试用例数量）
    - 完成标准（例如，已执行计划的测试、已执行的静态测试、已报告发现的所有缺陷、已自动化的所有回归测试）。
  - 时间或预算不足也可以被视为有效的出口准则。即使不满足其他出口准则，如果利益相关方已经评审并接受了不做进一步测试就上线的风险，那么在这种情况下可以接受结束测试
  - 在敏捷软件开发中，出口准则通常称为完成的定义，定义团队发布项目的客观度量
- 应为每个测试级别定义入口准则和出口准则，并根据测试目的而有所不同

#### 5.1.4 估算技术

- 测试工作量估算包括预测满足测试项目目的所需的测试相关工作量
- 要向利益相关方明确，估算是基于许多假设的，并且总是会出现估算误差
- 小任务的估算通常比大任务的估算更准确
- 当估算大任务时，可以将其分解为一组较小的任务，然后再对其进行估算

- 估算技术：
  - 基于比率的估算
    - 基于度量的技术
    - 数据是从组织内以前的项目中收集的，这使得可以得出类似项目的“标准”比率
    - 组织自身项目的比率（例如，取自历史数据）通常是估算过程中能使用的最佳数据来源
    - 可以使用这些标准比率来估算新项目的测试工作量
  - **外推**
    - 基于度量的技术
    - 在当前项目中尽早进行测量以收集数据
    - 有了足够的观测结果，剩余工作所需的工作量可以通过外推这些数据（通常通过应用数学模型）来估算
    - 这种方法非常适用于迭代的 SDLC
  - 宽带德尔菲
    - 基于专家的迭代技术
    - 专家进行基于经验的估算
    - 每一位专家独立估算工作量
    - 收集到的结果如果存在超出商定边界范围的偏差，专家们将讨论他们目前的估算。然后，要求每个专家根据反馈重新独立估算。不断重复此过程，直到达成共识
    - 规划扑克是宽带德尔菲方法的一个变体，通常用于敏捷软件开发。在计划扑克中，通常使用代表工作量大小的数字卡片进行估算
  - 三点估算、
    - 基于专家的技术
    - 专家做出三个估算：最乐观的估算（a）、最可能的估算（m）和最悲观的估算（b）
    - 最终估算（E）是它们的加权算术平均值
    - 在该技术最流行的版本中，估算值计算为 E=（a+4*m+b）/6
    - 该技术的优点是允许专家计算测量误差：SD=（b–a）/6

#### 5.1.5 测试用例优先级排序

- 在对测试用例进行优先级排序时，可以考虑不同的因素
- 最常用的测试用例优先级策略：
  - 基于风险的优先级
    - 测试执行顺序基于风险分析的结果
    - 优先执行覆盖最重要风险的测试用例。
  - 基于覆盖范围的优先级
    - 测试执行顺序基于覆盖
    - 优先执行覆盖率最高的测试用例
    - 另外一种优先级策略称为附加覆盖优先级，优先执行能达到最高覆盖的测试用例；后续的每个测试用例都是达到最高附加覆盖率的测试用例。
  - 基于需求的优先级
    - 测试执行的顺序基于测试用例对应需求的优先级
    - 需求优先级由利益相关方定义
    - 优先执行最重要需求相关的测试用例
- 如果测试用例或正在测试的特征具有相关性，则排优先级做法可能不起作用
- 如果优先级较高的测试用例依赖于优先级较低的测试用例，则必须优先执行低优先级的测试用例
- 测试执行的顺序还必须考虑资源的可用性

#### 5.1.6 测试金字塔

- 表明不同测试可能具有不同颗粒度的模型
- 通过说明不同级别的测试自动化支持的不同目标，测试金字塔模型支持团队的测试自动化和测试工作量分配
- 各金字塔层表示测试集
- 层越高，测试颗粒度就越粗，测试独立性越弱和测试执行速度越慢
- 底层的测试规模小、独立性强、快速，只检查部分功能，因此通常需要大量测试来实现合理的覆盖率
- 顶层代表复杂的、高级别的、端到端的测试
- 这些高层的测试通常比底层的测试慢，并且它们通常检查大块的功能，因此通常只需要其中的几个测试就可以实现合理的覆盖

#### 5.1.7 测试象限

- 测试象限将敏捷软件开发中的测试级别与适当的测试类型、活动、测试技术和工作产品组合在一起
- 该模型可视化了这些内容，以确保所有适当的测试类型和测试级别都包含在 SDLC 中，解释了某些测试类型比其他测试类型与某些测试级别相关性更强，以此支持测试管理
- 该模型为所有利益相关方（包括开发人员、测试人员和业务代表）提供了区分和描述测试类型的方法。
- 在这个模型中，测试可以是面向业务的，也可以是面向技术的
- 测试还可以支持团队（即指导开发）或评价产品（即根据预期衡量其行为）
- 四个象限
  - 象限 Q1（面向技术，支持团队）
    - 此象限包含组件和组件集成测试
    - 这些测试应该是自动化的，并包含在持续集成（CI）过程中
  - 象限 Q2（面向业务，支持团队）
    - 此象限包含功能测试、实例、用户故事测试、用户体验原型、API 测试和模拟测试
    - 这些测试检查验收准则，可以是人工的，也可以是自动的
  - 象限 Q3（面向业务，评价产品）
    - 这个象限包含探索性测试、易用性测试和用户验收测试
    - 这些测试是面向用户的，通常是人工测试
  - 象限 Q4（面向技术，评价产品）
    - 此象限包含冒烟测试和非功能性测试（易用性测试除外）
    - 这些测试通常是自动化的

### 5.2 风险管理

- 风险管理使组织能够增加实现目的的可能性，提高产品质量，增加利益相关方的信心和信任
- 主要活动包括
  - 风险分析（包括风险识别和风险评估）
  - 风险控制（包括风险缓解和风险监测）
- 基于风险分析和风险控制来选择、安排优先级和管理测试活动的测试方法称为基于风险的测试

#### 5.2.1 风险定义和风险属性

- 风险是指潜在的事件、危险、威胁或情况，其发生会造成不利影响
- 风险可由两个因素表征
  - 风险可能性--风险发生的概率（大于零且小于一）
  - 风险影响（危害）--风险发生的后果
- 这两个因素表示了风险级别，这是衡量风险的指标
- 风险级别越高，其处理就越重要

#### 5.2.2 项目风险和产品风险

- 项目风险
  - 与项目的管理和控制有关。
  - 项目风险包括
    - 组织问题（例如，工作产品交付延迟、估算不准确、成本削减）。
    - 人员问题（例如，技能不足、冲突、沟通问题、员工短缺）。
    - 技术问题（例如，范围蔓延、工具支撑不足）。
    - 供应商问题（例如，第三方交付失败、供应商公司破产）。
  - 项目风险一旦发生，可能会对项目进度、预算或范围产生影响，从而影响项目实现其目的的能力。
- 产品风险
  - 与产品质量特性有关
  - 产品风险包括
    - 功能缺失或错误
    - 计算错误
    - 运行时错误
    - 架构不良
    - 算法效率低
    - 响应时间过长
    - 用户体验差
    - 安全漏洞
  - 发生产品风险，可能会导致各种负面后果，包括：
    - 用户不满。
    - 收入、信任和声誉损失。
    - 对第三方的损害。
    - 维护成本高，服务台过载。
    - 刑事处罚。
    - 在极端情况下，造成身体损伤、受伤甚至死亡。

#### 5.2.3 产品风险分析

- 从测试的角度来看，产品风险分析的目标是提供对产品风险的认识，以便以最小残留产品风险级别的方式集中安排测试工作量
- 理想情况下，产品风险分析自 SDLC 早期开始
- 产品风险分析包括风险识别和风险评估
  - 风险识别
    - 是生成一份全面的风险清单
    - 利益相关方可以使用各种技术和工具来识别风险
    - 例如头脑风暴、研讨会、访谈或因果图
  - 风险评估
    - 对已识别的风险进行分类确定其风险可能性、风险影响和级别，确定优先级，并提出处理方法
    - 分类有助于提出缓解措施，通常同一类别的风险可以使用类似的方法来缓解
    - 风险评估可以使用定量或定性方法，也可以混合使用
      - 定量方法中，风险级别为风险可能性和风险影响的乘积
      - 在定性方法中，可以使用风险矩阵来确定风险级别

- 产品风险分析可能会影响测试的充分性和范围

- 产品风险分析结果可以用于

  - 确定要进行的测试范围

  - 确定特定的测试级别，提供建议执行的测试类型。

  - 确定采用的测试技术和达到的覆盖。

  - 估算每项任务所需的测试工作量

  - 进行测试优先级排序，以尽早发现关键缺陷

  - 确定是否可以采用除测试之外的其他活动来降低风险

#### 5.2.4 产品风险控制

- 产品风险控制包括为应对已识别和评估的产品风险而采取的所有措施

- 产品风险控制由风险缓解和风险监测组成

  - 风险缓解：包括实施风险评估中提出的行动，以降低风险级别
  - 风险监测：目的是确保缓解行动有效，获取进一步信息以改进风险评估，以及识别新出现的风险。

- 关于产品风险控制，风险分析后，可能有多种风险应对方案，例如通过测试缓解风险、接受风险、 转移风险或应急计划

- 可以通过测试缓解产品风险的活动：

  - 选择具有适当经验和技能水平、适合特定风险类型的测试人员。

  - 应用适当级别的测试独立性。

  - 实施评审及静态分析。

  - 应用适当的测试技术和覆盖级别。

  - 针对受影响的质量特性应用适当的测试类型。

  - 执行动态测试，包括回归测试。

### 5.3 测试监测、测试控制和测试完成

- 测试监测

  - 关注测试相关信息的收集
  - 该信息可用于评估测试过程，并测量测试出口准则或与测试出口准则关联的测试活动是否已经满足，例如产品风险、需求、或验收准则是否达到了覆盖目标

- 测试控制

  - 通过使用测试监测提供的信息，以控制指令的方式提供指导或必要的纠正措施，以达成最有效和最高效的测试
  - 控制指令的示例：
    - 已识别的风险成为问题时，重新确定测试优先级。

    - 重新评估由于返工而导致的测试项是否满足入口或出口准则。

    - 调整测试进度表以应对测试环境交付延迟的问题。

    - 在必要的时间和地点增加新资源。


- 测试完成
  - 从已完成的测试活动中收集数据，总结经验、整合测试件和收集任何其他相关信息
  - 测试完成活动发生在项目里程碑处，如测试级别已完成、敏捷的迭代已结束、测试项目已完成（或取消）、 软件系统已发布、或维护版本已完成

#### 5.3.1 测试中使用的度量

- 收集的测试度量用以显示相对于计划和预算的当前进度、测试对象当前质量、以及测试活动在达成期望目标或者迭代目标的有效性

- 测试监测收集各种度量以支持测试控制和测试完成

- 常见的测试度量

  - 项目进度度量（如：任务完成情况、资源使用情况、测试工作量）。

  - 测试进度度量（如：测试用例实施进度、测试环境准备进度、已执行/未执行测试用例数、通过/失败的测试用例数、测试执行时间）。

  - 产品质量度量（如：可用性、响应时间、平均失效时间）。

  - 缺陷度量（如：发现和修复的缺陷数和优先级、缺陷密度、缺陷检测率）。

  - 风险度量（如：遗留风险级别）。

  - 覆盖率度量（如：需求覆盖率、代码覆盖率）。

  - 成本度量（如：测试成本、组织的质量成本）。

#### 5.3.2 测试报告的目的、内容和受众

- 测试报告用于在测试过程中和测试结束后总结并沟通测试信息
- 测试进度报告
  - 支持对测试的持续控制，当出现由于偏离计划或环境变化而需要修改测试进度表、资源或测试计划时，测试进度报告应提供足够的信息
  - 在测试监测和控制期间，测试团队为了让利益相关方随时了解情况，向他们提供测试进度报告
  - 
- 测试完成报告总结了测试的特定阶段（如：测试级别、测试周期、迭代），并能为后续的测试提供信息。
- 